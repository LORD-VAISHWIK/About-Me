@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --nav-h: 4rem;
    --safe-top: env(safe-area-inset-top, 0px);
    --timeline-dot-offset: clamp(2rem, 5vw, 3.25rem);
  }

  html {
    font-size: clamp(15px, 0.35vw + 14px, 18px);
    text-size-adjust: 100%;
    -webkit-text-size-adjust: 100%;
  }

  body {
    @apply bg-background min-h-screen overflow-x-hidden;
  }

  /* Suble Grain Overlay - Only on Desktop for performance */
  @media (min-width: 1024px) {
    body::before {
      content: "";
      @apply fixed inset-0 z-[1] pointer-events-none opacity-[0.03] brightness-100 contrast-150;
      background-image: url('https://grainy-gradients.vercel.app/noise.svg');
    }
  }

  section {
    scroll-margin-top: calc(var(--nav-h) + var(--safe-top) + 1rem);
  }
}

@layer components {
  .glass {
    @apply bg-[#0a0f1e]/80 backdrop-blur-none md:backdrop-blur-[16px] border-b border-white/5;
  }
  
  .glass-card {
    /* Mobile: Ultra-simple solid card with NO effects that could cause artifacts */
    background-color: #0d1324;
    border: 1px solid rgba(255, 255, 255, 0.1);
    position: relative;
    overflow: hidden;
    /* Force new stacking context to prevent canvas bleeding */
    isolation: isolate;
    /* Disable all GPU acceleration on mobile */
    transform: translateZ(0);
    -webkit-transform: translateZ(0);
  }
  
  /* Desktop only: Add back the premium effects */
  @media (min-width: 768px) {
    .glass-card {
      backdrop-filter: blur(12px);
      -webkit-backdrop-filter: blur(12px);
      background: rgba(255, 255, 255, 0.02);
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
      transform: translateZ(0) translateX(0);
    }
  }

  .text-gradient {
    @apply bg-clip-text text-transparent bg-gradient-to-r from-blue-400 via-cyan-400 to-indigo-400;
  }

  .animate-marquee {
    will-change: transform;
  }

  /* Project cards: Extra protection against mobile artifacts */
  .project-card {
    /* Force solid rendering on mobile */
    backface-visibility: hidden;
    -webkit-backface-visibility: hidden;
  }

  /* Hover effects for projects - Only on desktop */
  @media (hover: hover) and (min-width: 768px) {
    .project-grid:hover .project-card {
      @apply opacity-30 scale-[0.98] transition-all duration-500;
    }

    .project-grid .project-card:hover {
      @apply opacity-100 scale-105 -translate-y-[8px] z-[100] !important;
      @apply shadow-[0_15px_30px_-5px_rgba(0,0,0,0.6),0_0_15px_rgba(59,130,246,0.2)] border-blue-500/40 bg-[#0b1120] !important;
    }
  }
}

/* Custom Scrollbar */
::-webkit-scrollbar {
  width: 0.5rem;
}
::-webkit-scrollbar-track {
  background: #02040a;
}
::-webkit-scrollbar-thumb {
  background: linear-gradient(to bottom, #3b82f6, #06b6d4);
  border-radius: 0.25rem;
}

